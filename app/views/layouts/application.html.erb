<!DOCTYPE html>
<html>
  <head>
    <title>StompingGrounds</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '547460783751616',
          xfbml      : true,
          version    : 'v14.0'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
    <div class="nav-bar">
    <div class="welcome"><h1>Welcome to Stomping Grounds<% if user_signed_in? %>, <%= link_to "#{User.find(current_user.id).name}", user_show_path(User.find(current_user.id)) %><% end %>!</h1></div>
      <div class="sign-in">
        <% if user_signed_in? %>
          <div><%= link_to "Home", root_path %></div>
          <div><%= link_to "Log Out", destroy_user_session_path %></div>
        <% else %>
          <div><%= link_to "Sign in with Facebook", user_facebook_omniauth_authorize_path, data: {turbo_method: :post} %></div>
          <div><%= link_to "Sign In", new_user_session_path %></div>
          <div><%= link_to "Sign Up", new_user_registration_path %></div>
        <% end %>
      </div>
    </div>
    <%= yield %>
  </body>
</html>
